<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DimeX Admin</title>

<script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.min.js"></script>

<style>
body{background:#000;color:#fff;font-family:Arial;margin:0;text-align:center}
.header{padding:20px;font-size:26px;color:gold;font-weight:bold}
.btn{background:gold;border:none;padding:14px;border-radius:10px;font-weight:bold;margin-top:10px;width:220px;cursor:pointer}
.card{background:#111;padding:18px;margin:18px auto;width:92%;max-width:500px;border-radius:14px}
.value{color:gold;font-size:22px;font-weight:bold;margin-top:6px}
input{padding:12px;width:90%;margin-top:10px;background:#000;border:1px solid #333;color:#fff;border-radius:8px}
#wallet{color:#aaa;margin-top:10px}
</style>
</head>

<body>

<div class="header">DimeX Admin Panel</div>

<div class="card">
<button class="btn" onclick="connect()">Connect Admin Wallet</button>
<div id="wallet"></div>
</div>

<div id="panel" style="display:none">

<div class="card">
<h3>DMX Balance</h3>
<div id="dmxBal" class="value">0</div>
</div>

<div class="card">
<h3>USDT Balance</h3>
<div id="usdtBal" class="value">0</div>
</div>

<div class="card">
<input id="rewardAmt" placeholder="DMX amount">
<button class="btn" onclick="sendReward()">Send to Staking</button>
</div>

</div>

<script>

const ADMIN="0x53ba2d865be750d0e2d4d01bcb0a46ec1684c46b";
const DX="PASTE_DMX_TOKEN";
const STAKING="PASTE_STAKING_ADDRESS";
const USDT="0x55d398326f99059fF775485246999027B3197955";

let provider, signer, dx, usdt;

async function connect(){

try{

if(!window.ethereum){
alert("Open in MetaMask or TrustWallet browser");
return;
}

provider = new ethers.providers.Web3Provider(window.ethereum);
await provider.send("eth_requestAccounts",[]);

const network = await provider.getNetwork();
if(network.chainId !== 56){
alert("Switch to BSC Mainnet");
return;
}

signer = provider.getSigner();
const addr = await signer.getAddress();

document.getElementById("wallet").innerHTML="Wallet: "+addr;

if(addr.toLowerCase() !== ADMIN.toLowerCase()){
alert("Not admin wallet");
return;
}

document.getElementById("panel").style.display="block";

dx = new ethers.Contract(DX,[
"function balanceOf(address) view returns(uint)",
"function transfer(address,uint)"
],signer);

usdt = new ethers.Contract(USDT,[
"function balanceOf(address) view returns(uint)"
],signer);

load();
setInterval(load,5000);

}catch(e){
console.log(e);
alert("Connect failed");
}
}

async function load(){
let addr = await signer.getAddress();

let d = await dx.balanceOf(addr);
let u = await usdt.balanceOf(addr);

document.getElementById("dmxBal").innerHTML = ethers.utils.formatUnits(d,18);
document.getElementById("usdtBal").innerHTML = ethers.utils.formatUnits(u,18);
}

async function sendReward(){
let amt=document.getElementById("rewardAmt").value;
if(!amt) return alert("Enter amount");

let tx=await dx.transfer(STAKING, ethers.utils.parseUnits(amt,18));
await tx.wait();
alert("Reward sent");
load();
}

</script>

</body>
</html>
